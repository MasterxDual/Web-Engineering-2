<!-- El documento es HTML -->
<!DOCTYPE html>
<!-- El idioma del contenido es español -->
<html lang="es">
    <head>
        <!-- Permite añadir carácteres especiales -->
        <meta charset="UTF-8">
        <!-- Para adaptar la página en móviles -->
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>El login de la web</title>
        <!-- Añadiendo la página de estilos CSS -->
        <link rel="stylesheet" href="/Practico 1/styles.css">
        <!-- Añadiendo las fuentes de Google fonts -->
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Lato:ital,wght@0,100;0,300;0,400;0,700;0,900;1,100;1,300;1,400;1,700;1,900&display=swap" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css2?family=Lato:ital,wght@0,100;0,300;0,400;0,700;0,900;1,100;1,300;1,400;1,700;1,900&family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
    </head>
    <body>
        <!-- Contenedor que abarca a toda la pagina -->
        <div class="container">
            <!-- Insertamos el logotipo con una descripción alternativa -->
            <div class="logotipo">
                <img id="logotipo" src="/Practico 1/assets/img/Logo.png" alt="Logotipo de mi página">
            </div>
            <!-- Formulario para ingresar datos del usuario -->
            <form id="login-form">
                <!-- Contenedor de los inputs user y password -->
                <div class="text-input">
                    <input class="text-link" type="text" id="user" required placeholder="Correo electrónico" name="user"/>
                    <input class="text-link" type="password" id="password" minlength="8" placeholder="Contraseña" name="password" required/>
                    <span id="user-error"></span>
                </div>
                <!-- Contenedor de enlace a contraseña olvidada-->
                <!-- Falta agregar los enlaces a las paginas a mis <a> -->
                <div class="forgot-pass">
                    <a href="" class="text-link text-remove" id="text1">Olvidaste tu contraseña?</a>
                </div>
                <!-- Contenedor del botón de iniciar sesión -->
                <div class="button">
                    <!-- Botón desabilitado inicialmente hasta que ingresemos user y password como debe ser -->
                    <button id="button" type="submit" disabled>Iniciar sesión</button>
                </div>
                <!-- Contenedor de enlace a registrar cuenta nueva -->
                <div class="register">
                    <p id="text2">No tenes una cuenta? - <a href="" id="register" class="text-link">Registrate</a></p>
                </div>

                <script>
                    window.addEventListener("DOMContentLoaded", () => {
                        const userInput = document.getElementById("user");
                        const passwordInput = document.getElementById("password");
                        const submitButton = document.getElementById("button");

                        setTimeout(() => {
                            /* Le agregamos el efecto lento de entrada a la página del login */
                            document.body.classList.add("fade-in");
                        }, 1500); //Delay para mostrar la página del login

                        /* Verifica que ambos inputs (user y pass) estén completos para activar el botón de submit */
                        function checkInputs() {
                            if(userInput.value.trim() !== "" && passwordInput.value.trim() !== "") {
                                submitButton.disabled = false; // Habilitamos el botón
                            } else {
                                submitButton.disabled = true; // Deshabilitamos el botón
                            }
                        }

                        /* Añade un evento a ambos inputs para verificar cuando haya algún cambio en ambos inputs, sino no podremos verificar en el momento exacto en que estamos 
                        escribiendo algo en cualquiera de los dos inputs */
                        userInput.addEventListener("input", checkInputs);
                        passwordInput.addEventListener("input", checkInputs);
                    });

                    // Definimos el evento para enviar el formulario utilizando la function(event)
                    document.getElementById("login-form").addEventListener("submit", function(event) {
                        const userInput = document.getElementById("user");
                        const errorSpan = document.getElementById("user-error");
                        // Recogemos el valor que ingrese en el input user
                        const email = userInput.value;
                        /* Expresión regular para verificar si es un email lo que se escribió en el input user */
                        const regex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;

                        /* La funcion test() devuelve True si el email coincide con el patrón de regex */
                        if(!regex.test(email)) {
                            event.preventDefault(); // Evitamos que el formulario se envíe
                            // Si no es un email, mostramos el mensaje de error
                            errorSpan.textContent = "Por favor, ingresa un correo electrónico válido."; 

                            // Limpiamos el mensaje de error después de 3 segundos
                            setTimeout(() => {
                                errorSpan.textContent = ""; 
                            }, 3000);
                        } else {
                            // No mostramos ningún mensaje de error, evita que se produzca el evento de submit
                            errorSpan.textContent = ""; 
                        }
                    });                    
                </script>
            </form>
        </div>
    </body>
</html>
